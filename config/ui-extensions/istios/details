header:
- name: Ready
  source: status.state
  widget: Badge
  description: status.description
  highlights:
    positive:
      - 'Ready'
    negative:
      - 'Error'
    critical:
      - 'Warning'
body:
- widget: Panel
  name: Configuration
  children:
    - source: spec.config.numTrustedProxies
      name: config.numTrustedProxies
      placeholder: '1'

- widget: Panel
  name: Pilot
  visibility: '$exists(spec.components.pilot.k8s.hpaSpec.minReplicas) ? true : $exists(spec.components.pilot.k8s.hpaSpec.maxReplicas) ? true : $exists(spec.components.pilot.k8s.strategy.rollingUpdate.maxSurge) ? true :  $exists(spec.components.pilot.k8s.strategy.rollingUpdate.maxUnavailable) ? true : $exists(spec.components.pilot.k8s.resources.limits.cpu) ? true : $exists(spec.components.pilot.k8s.resources.limits.memory) ? true : $exists(spec.components.pilot.k8s.resources.requests.cpu) ? true : $exists(spec.components.pilot.k8s.resources.requests.memory) ? true : false'
  children:
  - source: spec.components.pilot.k8s.hpaSpec.minReplicas
    name: k8s.hpaSpec.minReplicas
    visibility: '$exists($value)'
  - source: spec.components.pilot.k8s.hpaSpec.maxReplicas
    name: k8s.hpaSpec.maxReplicas
    visibility: '$exists($value)'
  - source: spec.components.pilot.k8s.strategy.rollingUpdate.maxSurge
    name: k8s.strategy.rollingUpdate.maxSurge
    visibility: '$exists($value)'
  - source: spec.components.pilot.k8s.strategy.rollingUpdate.maxUnavailable
    name: k8s.strategy.rollingUpdate.maxUnavailable
    visibility: '$exists($value)'
  - source: spec.components.pilot.k8s.resources.limits.cpu
    name: k8s.resources.limits.cpu
    visibility: '$exists($value)'
  - source: spec.components.pilot.k8s.resources.limits.memory
    name: k8s.resources.limits.memory
    visibility: '$exists($value)'
  - source: spec.components.pilot.k8s.resources.requests.cpu
    name: k8s.resources.requests.cpu
    visibility: '$exists($value)'
  - source: spec.components.pilot.k8s.resources.requests.memory
    name: k8s.resources.requests.memory
    visibility: '$exists($value)'

- source: status.conditions
  widget: Table
  name: Reconciliation Conditions
  children:
    - source: type
      name: Type
    - source: status
      name: Status
      widget: Badge
      highlights:
        success:
          - 'True'
        error:
          - 'False'
    - source: reason
      name: Reason
    - source: message
      name: Message
    - source: '$readableTimestamp(lastTransitionTime)'
      name: Last transition
      sort: true